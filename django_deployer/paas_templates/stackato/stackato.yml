name: {{ project_name }}
framework: python
runtime: {{ pyversion }}
env:
  DJANGO_SETTINGS_MODULE: {{ django_settings }}
requirements:
  # pypm:
  #   - psycopg2
  #   - django
  #   - south
  # pip:
  #   - python-memcached
processes:
  web: $STACKATO_UWSGI --static-map /{{ static_url }}=$HOME/static
services:
{% if database == 'PostgreSQL' %}
  {{ project_name }}-postgresql: postgresql
{% endif %}
{% if database == 'MySQL' %}
  {{ project_name }}-mysql: mysql
{% endif %}
#  ${name}-cache: memcached
hooks:
  post-staging:
    - python manage.py syncdb --noinput
    - python manage.py migrate
    - echo "Run 'stackato run python manage.py createsuperuser' to create an admin user"
ignores: 
  - .git
  - dev.db